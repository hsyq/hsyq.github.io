(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{299:function(a,s,t){"use strict";t.r(s);var e=t(13),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"管理应用程序状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#管理应用程序状态"}},[a._v("#")]),a._v(" 管理应用程序状态")]),a._v(" "),s("p",[a._v("使用 PM2，您可以轻松地在后台启动/重新启动/重新加载/停止/列出应用程序。")]),a._v(" "),s("h3",{attrs:{id:"开始"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[a._v("#")]),a._v(" 开始")]),a._v(" "),s("p",[a._v("启动应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 start api.js\n")])])]),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/757747/123512784-b0341900-d689-11eb-93d4-69510ee2be27.png",alt:"图片"}})]),a._v(" "),s("p",[a._v("您还可以启动其他类型的应用程序，例如 bash 命令、脚本、二进制文件：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 start "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"npm run start"')]),a._v("\n$ pm2 start "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"ls -la"')]),a._v("\n$ pm2 start app.py\n")])])]),s("h4",{attrs:{id:"启动并显示日志流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动并显示日志流"}},[a._v("#")]),a._v(" 启动并显示日志流")]),a._v(" "),s("p",[a._v("要启动应用程序并检查日志流，请使用以下"),s("code",[a._v("--attach")]),a._v("选项：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 start api.js --attach\n")])])]),s("p",[a._v("通过 Ctrl-C 退出时，应用程序仍将在后台运行。")]),a._v(" "),s("h4",{attrs:{id:"传递参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#传递参数"}},[a._v("#")]),a._v(" 传递参数")]),a._v(" "),s("p",[a._v("之后传递的所有选项"),s("code",[a._v("--")]),a._v("都将作为参数传递给应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 start api.js -- arg1 arg2\n")])])]),s("h4",{attrs:{id:"配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[a._v("#")]),a._v(" 配置文件")]),a._v(" "),s("p",[a._v("当同时管理多个应用程序或必须指定多个选项时，您可以使用配置文件。此生态系统.config.js 文件的示例：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("module.exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  apps "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    name   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"limit worker"')]),a._v(",\n    script "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./worker.js"')]),a._v(",\n    args   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"limit"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(","),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    name   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rotate worker"')]),a._v(",\n    script "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./worker.js"')]),a._v(",\n    args   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"rotate"')]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("p",[a._v("之后，通过配置文件就可与启动两个应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 start ecosystem.config.js\n")])])]),s("p",[a._v("阅读有关"),s("a",{attrs:{href:"https://pm2.keymetrics.io/docs/usage/application-declaration/",target:"_blank",rel:"noopener noreferrer"}},[a._v("配置文件"),s("OutboundLink")],1),a._v("的更多信息。")]),a._v(" "),s("h3",{attrs:{id:"重启"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重启"}},[a._v("#")]),a._v(" 重启")]),a._v(" "),s("p",[a._v("重新启动应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 restart api\n")])])]),s("p",[a._v("重新启动所有应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 restart all\n")])])]),s("p",[a._v("一次重启多个应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 restart app1 app3 app4\n")])])]),s("h4",{attrs:{id:"更新环境变量和选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新环境变量和选项"}},[a._v("#")]),a._v(" 更新环境变量和选项")]),a._v(" "),s("p",[a._v("要更新环境变量或 PM2 选项，请指定"),s("code",[a._v("--update-env")]),a._v("选项：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("NODE_ENV")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("production pm2 restart web-interface --update-env\n")])])]),s("h3",{attrs:{id:"停止"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#停止"}},[a._v("#")]),a._v(" 停止")]),a._v(" "),s("p",[a._v("停止指定的应用：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 stop api\n$ pm2 stop "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("process_id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("p",[a._v("停止所有应用：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 stop all\n")])])]),s("p",[a._v("一次停止多个应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 stop app1 app3 app4\n")])])]),s("p",[a._v("注意：这不会从 PM2 应用程序列表中删除该应用程序。请参阅下一节以删除应用程序。")]),a._v(" "),s("h3",{attrs:{id:"删除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除"}},[a._v("#")]),a._v(" 删除")]),a._v(" "),s("p",[a._v("停止和删除应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 delete api\n")])])]),s("p",[a._v("删除所有的应用城西：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 delete all\n")])])]),s("h2",{attrs:{id:"列出应用程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#列出应用程序"}},[a._v("#")]),a._v(" 列出应用程序")]),a._v(" "),s("p",[a._v("列出所有应用程序，包括运行中的和停止状态的：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ pm2 list\n# Or\n$ pm2 [list|ls|l|status]\n")])])]),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/757747/123511260-a3f78e00-d680-11eb-8907-3f1017ef7dc8.png",alt:"图片"}})]),a._v(" "),s("p",[a._v("按照指定的顺序列出应用程序：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 list --sort name:desc\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Or")]),a._v("\n$ pm2 list --sort "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("pid"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("memory"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("cpu"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("status"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("uptime"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(":asc"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("desc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h3",{attrs:{id:"终端仪表板"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#终端仪表板"}},[a._v("#")]),a._v(" 终端仪表板")]),a._v(" "),s("p",[a._v("PM2 为您提供了一种简单的方法来监控应用程序的资源使用情况。您可以通过以下方式轻松直接地从终端监控内存和 CPU：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pm2 monit\n")])])]),s("p",[s("img",{attrs:{src:"https://pm2.keymetrics.io/images/pm2-monit.png",alt:"PM2 监测"}})]),a._v(" "),s("h3",{attrs:{id:"显示应用程序元数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#显示应用程序元数据"}},[a._v("#")]),a._v(" 显示应用程序元数据")]),a._v(" "),s("p",[a._v("要显示有关应用程序的元数据：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 show api\n")])])]),s("p",[s("img",{attrs:{src:"https://user-images.githubusercontent.com/757747/123510635-fafb6400-d67c-11eb-8534-0ce6106979b2.png",alt:"绘画"}})]),a._v(" "),s("h3",{attrs:{id:"重置重启次数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重置重启次数"}},[a._v("#")]),a._v(" 重置重启次数")]),a._v(" "),s("p",[a._v("重置重启计数器：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ pm2 reset all\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);