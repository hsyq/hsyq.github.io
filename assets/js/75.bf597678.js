(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{340:function(t,a,e){"use strict";e.r(a);var n=e(13),s=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"pnpm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm"}},[t._v("#")]),t._v(" Pnpm")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/hsyq/assets/imgs/2022-05/202205141833865.png",alt:"image-20220514183345822"}})]),t._v(" "),a("p",[t._v("官网：https://pnpm.io/")]),t._v(" "),a("p",[t._v("官网中文版：https://pnpm.io/zh/")]),t._v(" "),a("p",[t._v("中文官网：https://www.pnpm.cn/")]),t._v(" "),a("p",[t._v("Pnpm，即Permance npm，性能更强的npm。")]),t._v(" "),a("p",[t._v("关于为什么它的性能更强，有一篇文章推荐阅读，"),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/404784010",target:"_blank",rel:"noopener noreferrer"}},[t._v("《Pnpm: 最先进的包管理工具》"),a("OutboundLink")],1),t._v("，点击直达。")]),t._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("通过npm进行安装：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v("\n")])])]),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("p",[t._v("pnpm 使用 "),a("a",{attrs:{href:"https://docs.npmjs.com/misc/config",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm 的配置"),a("OutboundLink")],1),t._v(" 格式。 因此，您设置配置的方式应该与 npm 相同。 例如，")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("pnpm config set store-dir /path/to/.pnpm-store\n")])])]),a("p",[t._v("如果没有配置 store ，那么pnpm 将自动在同一磁盘上创建 store。 如果您需要 pnpm 跨越多个硬盘或文件系统，请阅读 "),a("a",{attrs:{href:"https://pnpm.io/zh/faq#does-pnpm-work-across-multiple-hard-drives-or-filesystems",target:"_blank",rel:"noopener noreferrer"}},[t._v("常见问题"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("此外，pnpm 使用与 npm 相同的配置进行安装。 如果您有一个私有源并且 npm 被配置使用它， pnpm 应该不需要额外的配置也能够授权请求。")]),t._v(" "),a("p",[t._v("除了这些选项外， pnpm 也允许您使用所有标记为作选项的参数(例如 "),a("code",[t._v("--filter")]),t._v(" 或 "),a("code",[t._v("--workspace concurrency")]),t._v(") ：")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("workspace-concurrency = 1\nfilter = @my-scope/*\n")])])]),a("h3",{attrs:{id:"pnpm-config"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-config"}},[t._v("#")]),t._v(" pnpm config")]),t._v(" "),a("p",[t._v("该命令是"),a("code",[t._v("npm config")]),t._v("命令的别名。")]),t._v(" "),a("p",[t._v("简写为"),a("code",[t._v("c")]),t._v("。")]),t._v(" "),a("p",[t._v("npm config命令介绍：https://docs.npmjs.com/cli/v8/commands/npm-config")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看系统的npmrc配置文件，list别名ls")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config list\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出")]),t._v("\nPS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config list\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),t._v(" config from C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("kunwu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(".npmrc\n\nhome "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://npm.taobao.org"')]),t._v("\nregistry "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://registry.npmmirror.com/"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("node")]),t._v(" bin location "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("nodejs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("node.exe\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" cwd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("HOME")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" C:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("kunwu\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Run "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v(" -l"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" to show all defaults.\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看系统npm的全部配置，以 key=value格式展示")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config list -l\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看系统npm的全部配，以json格式展示")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config list --json\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置一个或多个配置项")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看一个或多个配置项")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config get "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看一个或多个配置项")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config delete "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 以json格式查看全部配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config list "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打开一个编辑器，来编辑全局的.npmrc文件，windows会打开记事本")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" config edit\n")])])]),a("h2",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),a("h3",{attrs:{id:"pnpm-init"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-init"}},[t._v("#")]),t._v(" pnpm init")]),t._v(" "),a("p",[t._v("创建一个"),a("code",[t._v("package.json")]),t._v("。")]),t._v(" "),a("p",[t._v("以前的版本好像还可以带"),a("code",[t._v("-y")]),t._v("参数，现在不行了，只能：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" init\n")])])]),a("h3",{attrs:{id:"pnpm-add"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-add"}},[t._v("#")]),t._v(" pnpm add "),a("pkg")],1),t._v(" "),a("p",[t._v("安装软件包及其依赖的任何软件包。 默认情况下，任何新软件包都安装为生产依赖项。")]),t._v(" "),a("p",[t._v("demo：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Command")]),t._v(" "),a("th",[t._v("Meaning")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("pnpm add sax")])]),t._v(" "),a("td",[t._v("保存到 "),a("code",[t._v("dependencies")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("pnpm add -D sax")])]),t._v(" "),a("td",[t._v("保存到 "),a("code",[t._v("devDependencies")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("pnpm add -O sax")])]),t._v(" "),a("td",[t._v("保存到 "),a("code",[t._v("optionalDependencies")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("pnpm add -g sax")])]),t._v(" "),a("td",[t._v("全局安装包")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("pnpm add sax@next")])]),t._v(" "),a("td",[t._v("从 "),a("code",[t._v("next")]),t._v(" 标签下安装包的下一个版本")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("pnpm add sax@3.0.0")])]),t._v(" "),a("td",[t._v("安装指定版本 "),a("code",[t._v("3.0.0")])])])])]),t._v(" "),a("h4",{attrs:{id:"支持的包地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的包地址"}},[t._v("#")]),t._v(" 支持的包地址")]),t._v(" "),a("h4",{attrs:{id:"从-npm-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-npm-安装"}},[t._v("#")]),t._v(" 从 npm 安装")]),t._v(" "),a("p",[a("code",[t._v("pnpm add package-name")]),t._v(" 默认会从 "),a("a",{attrs:{href:"https://www.npmjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm registry"),a("OutboundLink")],1),t._v(" 安装最新的 "),a("code",[t._v("package-name")]),t._v("。")]),t._v(" "),a("p",[t._v("如果在 workspace 中执行，该命令将首先去检查这个 worksapce 中的其他项目是否已经使用了这个指定的包。 如果是的话，就使用这个包的版本范围来进行安装。")]),t._v(" "),a("p",[t._v("你还可以通过以下方式安装包：")]),t._v(" "),a("ul",[a("li",[t._v("tag: "),a("code",[t._v("pnpm add express@nightly")])]),t._v(" "),a("li",[t._v("version: "),a("code",[t._v("pnpm add express@1.0.0")])]),t._v(" "),a("li",[t._v("version range: "),a("code",[t._v('pnpm add express@2 react@">=0.1.0 <0.2.0"')])])]),t._v(" "),a("h4",{attrs:{id:"从-workspace-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-workspace-安装"}},[t._v("#")]),t._v(" 从 workspace 安装")]),t._v(" "),a("p",[t._v("需要注意的是当我们使用 "),a("a",{attrs:{href:"https://pnpm.io/zh/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("workspace"),a("OutboundLink")],1),t._v(" 安装依赖时，会从已配置的源处进行安装，当然取决于是否设置了 "),a("a",{attrs:{href:"https://pnpm.io/zh/workspaces#link-workspace-packages",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("link-workspace-packages")]),a("OutboundLink")],1),t._v("，以及是否使用了 "),a("a",{attrs:{href:"https://pnpm.io/zh/workspaces#workspace-ranges-workspace",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("workspace: range protocol")]),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"从本地安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从本地安装"}},[t._v("#")]),t._v(" 从本地安装")]),t._v(" "),a("p",[t._v("从本地安装的两种方法:")]),t._v(" "),a("ol",[a("li",[t._v("源码文件 ("),a("code",[t._v(".tar")]),t._v(", "),a("code",[t._v(".tar.gz")]),t._v(", or "),a("code",[t._v(".tgz")]),t._v(")")]),t._v(" "),a("li",[t._v("本地目录")])]),t._v(" "),a("p",[t._v("示例：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" ./package.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" ./some-directory\n")])])]),a("p",[t._v("当从目录安装时，会在当前项目目录中生成一个 symlink "),a("code",[t._v("node_modules")]),t._v(", 因此这里跟执行 "),a("code",[t._v("pnpm link")]),t._v(" 是一致的.")]),t._v(" "),a("h4",{attrs:{id:"从远端安装-tar-包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从远端安装-tar-包"}},[t._v("#")]),t._v(" 从远端安装 Tar 包")]),t._v(" "),a("p",[t._v('参数必须是一个可访问的 URL，"http://" 或者 "https://" 开头的。')]),t._v(" "),a("p",[t._v("示例：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" https://github.com/indexzero/forever/tarball/v0.5.6\n")])])]),a("h4",{attrs:{id:"从-git-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-git-安装"}},[t._v("#")]),t._v(" 从 git 安装")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("git remote url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("通过 git clone, 从 git 作者处安装包。可以用协议准确的指定 git 作者 例如， "),a("code",[t._v("pnpm add github:user/repo")])]),t._v(" "),a("p",[t._v("您可以通过以下方式从 Git 安装:")]),t._v(" "),a("ul",[a("li",[t._v("来自 master 的最新提交： "),a("code",[t._v("pnpm add kevva/is-positive")])]),t._v(" "),a("li",[t._v("提交: "),a("code",[t._v("pnpm add keva/is-positive#97edff6f525f192a3f83cea194765f769ae2678")])]),t._v(" "),a("li",[t._v("分支: "),a("code",[t._v("pnpm add keva/is-positive#master")])]),t._v(" "),a("li",[t._v("版本范围： "),a("code",[t._v("pnpm add kevva/is-positive#semver:^2.0.0")])])]),t._v(" "),a("h4",{attrs:{id:"配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置项"}},[t._v("#")]),t._v(" 配置项")]),t._v(" "),a("p",[t._v("--save-prod, -P"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/add#--save-prod--p",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("将指定的软件包安装为常规的 "),a("code",[t._v("dependencies")]),t._v("。")]),t._v(" "),a("p",[t._v("--save-dev, -D"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/add#--save-dev--d",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("将指定的 packages 安装为 "),a("code",[t._v("devDependencies")]),t._v("。")]),t._v(" "),a("p",[t._v("--save-optional, -O"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/add#--save-optional--o",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("将指定的 packages 安装为 "),a("code",[t._v("optionalDependencies")]),t._v("。")]),t._v(" "),a("p",[t._v("--save-exact, -E"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/add#--save-exact--e",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("保存的依赖会被指定为一个确切的版本, 而不是使用 pnpm 的默认 semver range operator 配置.")]),t._v(" "),a("p",[t._v("--save-peer"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/add#--save-peer",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("--save-peer")]),t._v(" 会添加一个或多个 "),a("code",[t._v("peerDependencies")]),t._v(" 的 package 并安装到 dev dependencies.")]),t._v(" "),a("p",[t._v("--ignore-workspace-root-check"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/add#--ignore-workspace-root-check",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("除非使用"),a("code",[t._v("--ignore-workspace-root-check")]),t._v(" 或 "),a("code",[t._v("-w")]),t._v("来标记. 否则在 root workspace 包添加依赖项时会失败.")]),t._v(" "),a("p",[t._v("例如, "),a("code",[t._v("pnpm add debug -w")]),t._v(".")]),t._v(" "),a("p",[t._v("--global, -g"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/add#--global--g",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("安装全局依赖")]),t._v(" "),a("p",[t._v("--workspace"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/add#--workspace",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("仅添加在 workspace 找到的依赖项.")]),t._v(" "),a("p",[t._v("--filter <package_selector>")]),t._v(" "),a("h3",{attrs:{id:"pnpm-install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-install"}},[t._v("#")]),t._v(" pnpm install")]),t._v(" "),a("p",[t._v("和npm一样，install命令的别名为i。")]),t._v(" "),a("p",[a("code",[t._v("pnpm install")]),t._v(" 用于安装项目所有依赖。")]),t._v(" "),a("p",[t._v("在CI环境中, 如果存在需要更新的 lockfile 会安装失败.")]),t._v(" "),a("p",[t._v("在 "),a("a",{attrs:{href:"https://pnpm.io/zh/workspaces",target:"_blank",rel:"noopener noreferrer"}},[t._v("workspace"),a("OutboundLink")],1),t._v("内, "),a("code",[t._v("pnpm install")]),t._v(" 下载项目所有依赖. 如果想禁用这个行为, 将 "),a("code",[t._v("recursive-install")]),t._v(" 设置为 "),a("code",[t._v("false")]),t._v(".")]),t._v(" "),a("p",[t._v("安装一个package。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 全局安装")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" global @vue/cli\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等同于")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g @vue/cli\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地安装，安装到项目目录中的node_modules")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i axios\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装到package.json中的dependencies字段，默认如此")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i axios --save\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i axios -S\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i axios\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装到package.json中的devDependencies字段，需要指定参数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i axios --save-dev\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i axios -D\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装到package.json中的devDependencies字段，需要指定参数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i eslint --save-dev\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i eslint -D\n")])])]),a("p",[t._v("无论添加依赖到哪个字段，直接通过install安装，都会一股脑儿全装上：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" \n")])])]),a("p",[t._v("如果指定安装 "),a("code",[t._v("dependencies")]),t._v("中的依赖：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --production\n")])])]),a("h3",{attrs:{id:"pnpm-update"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-update"}},[t._v("#")]),t._v(" pnpm update")]),t._v(" "),a("p",[t._v("别名: "),a("code",[t._v("up")])]),t._v(" "),a("p",[a("code",[t._v("pnpm update")]),t._v(" 根据指定的范围更新软件包的最新版本。")]),t._v(" "),a("p",[t._v("在不带参数的情况下使用时，将更新所有依赖关系。 您可以使用一些模式来更新特定的依赖项。")]),t._v(" "),a("h3",{attrs:{id:"npm-remove"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm-remove"}},[t._v("#")]),t._v(" npm remove")]),t._v(" "),a("p",[t._v("见名知义。")]),t._v(" "),a("p",[t._v("和"),a("code",[t._v("install")]),t._v("功能相反。")]),t._v(" "),a("h3",{attrs:{id:"pnpm-link"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-link"}},[t._v("#")]),t._v(" pnpm link")]),t._v(" "),a("p",[t._v("别名: "),a("code",[t._v("ln")])]),t._v(" "),a("p",[t._v("使当前本地包可在系统范围内或其他位置访问。")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("pnpm link &lt;dir>\npnpm link --global\npnpm link --global &lt;pkg>\n")])])]),a("h3",{attrs:{id:"pnpm-unlink"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-unlink"}},[t._v("#")]),t._v(" pnpm unlink")]),t._v(" "),a("p",[t._v("取消链接一个系统范围的"),a("code",[t._v("package")]),t._v(" (相对于 "),a("a",{attrs:{href:"https://pnpm.io/zh/cli/link",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("pnpm link")]),a("OutboundLink")],1),t._v(").")]),t._v(" "),a("p",[t._v("如果不带参数调用，则所有已链接的依赖项都将取消链接。")]),t._v(" "),a("p",[t._v("这类似于 "),a("code",[t._v("yarn unlink")]),t._v("，但 pnpm 会在删除外部链接后重新安装依赖项。")]),t._v(" "),a("h3",{attrs:{id:"pnpm-import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-import"}},[t._v("#")]),t._v(" pnpm import")]),t._v(" "),a("p",[a("code",[t._v("pnpm import")]),t._v(" 从另一个软件包管理器的 lock 文件生成 "),a("code",[t._v("pnpm-lock.yaml")]),t._v("。 支持的源文件：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("package-lock.json")])]),t._v(" "),a("li",[a("code",[t._v("npm-shrinkwrap.json")])]),t._v(" "),a("li",[a("code",[t._v("yarn.lock")])])]),t._v(" "),a("p",[t._v("请注意，如果您有要为其导入依赖项的工作区，那么在导入之前，您需要在 "),a("a",{attrs:{href:"https://pnpm.io/zh/pnpm-workspace_yaml",target:"_blank",rel:"noopener noreferrer"}},[t._v("pnpm-workspace.yaml"),a("OutboundLink")],1),t._v(" 文件中声明它们。")]),t._v(" "),a("h3",{attrs:{id:"pnpm-rebuild"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-rebuild"}},[t._v("#")]),t._v(" pnpm rebuild")]),t._v(" "),a("p",[t._v("别名： "),a("code",[t._v("rb")])]),t._v(" "),a("p",[t._v("重建一个"),a("code",[t._v("package")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"pnpm-prune"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-prune"}},[t._v("#")]),t._v(" pnpm prune")]),t._v(" "),a("p",[t._v("移除不需要的"),a("code",[t._v("packages")]),t._v("。")]),t._v(" "),a("p",[t._v("配置项"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/prune#%E9%85%8D%E7%BD%AE%E9%A1%B9",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("--prod"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/prune#--prod",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("删除在 "),a("code",[t._v("devDependencies")]),t._v(" 中指定的包。")]),t._v(" "),a("p",[t._v("--no-optional"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/prune#--no-optional",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("删除在 "),a("code",[t._v("optionalDependencies")]),t._v(" 中指定的包。")]),t._v(" "),a("p",[t._v(":::警告")]),t._v(" "),a("p",[t._v("prune 命令目前不支持在 "),a("code",[t._v("monorepo")]),t._v("中递归执行。 可以删除一个只安装 production 依赖的"),a("code",[t._v("monorepo")]),t._v(" 的几个"),a("code",[t._v("node_modules")]),t._v(" 文件夹，然后重新再用 "),a("code",[t._v("pnpm install --prod")]),t._v(" 安装。")]),t._v(" "),a("h3",{attrs:{id:"pnpm-fetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-fetch"}},[t._v("#")]),t._v(" pnpm fetch")]),t._v(" "),a("p",[t._v("将 lockfile 中列出包下载到虚拟存储中，包清单被忽略。")]),t._v(" "),a("p",[t._v("使用场景"),a("a",{attrs:{href:"https://pnpm.io/zh/cli/fetch#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("此命令专门用于加速构建 docker 映像。")]),t._v(" "),a("p",[t._v("您可能已经阅读了 "),a("a",{attrs:{href:"https://nodejs.org/en/docs/guides/nodejs-docker-webapp/",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方指南"),a("OutboundLink")],1),t._v(" 为 Node.js 应用程序编写 Dockerfile，如果您还没有阅读它，您可能想先阅读它。")]),t._v(" "),a("p",[t._v("从该指南中，我们可以学会如何为使用 pnpm 的项目编写优化的 Dockerfile ，这将类似于")]),t._v(" "),a("h3",{attrs:{id:"pnpm-install-test"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-install-test"}},[t._v("#")]),t._v(" pnpm install-test")]),t._v(" "),a("p",[t._v("别名: "),a("code",[t._v("it")])]),t._v(" "),a("p",[t._v("执行 "),a("code",[t._v("pnpm install")]),t._v(" 然后立即执行 "),a("code",[t._v("pnpm test")]),t._v(". 它使用参数和 "),a("a",{attrs:{href:"https://pnpm.io/zh/cli/install",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("pnpm install")]),a("OutboundLink")],1),t._v("完全相同.")]),t._v(" "),a("h3",{attrs:{id:"pnpm-run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-run"}},[t._v("#")]),t._v(" pnpm run")]),t._v(" "),a("p",[t._v("和npm一样，它也是一个完整命令 "),a("code",[t._v("run-script")]),t._v("的别名。")]),t._v(" "),a("p",[t._v("我们经常会在"),a("code",[t._v("package.json")]),t._v("中的"),a("code",[t._v("scripts")]),t._v("定义一些脚本命令，比如：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("\n")])])]),a("p",[t._v("对于"),a("code",[t._v("pnpm")]),t._v("，可以直接执行任何定义在"),a("code",[t._v("scripts")]),t._v("中的命令，不需要加"),a("code",[t._v("run")]),t._v("，当然加上也是可以的：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" run dev\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" run build\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" dev\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" build\n")])])]),a("p",[t._v("需要注意的是，此种简写"),a("strong",[t._v("仅适用于那些不与已有的pnpm 命令相同名字的脚本")]),t._v("。")]),t._v(" "),a("p",[t._v("比如pnpm本来有一个命令叫"),a("code",[t._v("pnpm create")]),t._v("，如果你又在"),a("code",[t._v("package.json")]),t._v("中定义了一个"),a("code",[t._v("create")]),t._v("脚本命令，那么它只会执行自己本身的命令，而忽略掉你自定义的命令。")]),t._v(" "),a("h3",{attrs:{id:"pnpm-test"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-test"}},[t._v("#")]),t._v(" pnpm test")]),t._v(" "),a("p",[t._v("别名: "),a("code",[t._v("run test")]),t._v(", "),a("code",[t._v("t")]),t._v(", "),a("code",[t._v("tst")])]),t._v(" "),a("p",[t._v("运行在"),a("code",[t._v("package")]),t._v(" 的"),a("code",[t._v("scripts")]),t._v(" 对象中"),a("code",[t._v("test")]),t._v(" 属性指定的任意的命令。")]),t._v(" "),a("p",[t._v("该属性的预期的作用是想为程序指定的运行单元测试或集成测试的命令。")]),t._v(" "),a("h3",{attrs:{id:"pnpm-start"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-start"}},[t._v("#")]),t._v(" pnpm start")]),t._v(" "),a("p",[t._v("别名: "),a("code",[t._v("run start")])]),t._v(" "),a("p",[t._v("运行在"),a("code",[t._v("package")]),t._v(" 的"),a("code",[t._v("scripts")]),t._v(" 对象中"),a("code",[t._v("start")]),t._v(" 属性指定的任意的命令。 如果"),a("code",[t._v("scripts")]),t._v(" 对象没有指定"),a("code",[t._v("start")]),t._v(" 属性，那么默认将尝试执行 "),a("code",[t._v("node server.js")]),t._v("，如果都不存在则会执行失败。")]),t._v(" "),a("p",[t._v("该属性的预期的作用是想为您的程序指定一个"),a("code",[t._v("start")]),t._v("命令。")]),t._v(" "),a("h3",{attrs:{id:"pnpm-create"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-create"}},[t._v("#")]),t._v(" pnpm create")]),t._v(" "),a("p",[t._v("使用@scope/create-"),a("pkg",[t._v(" 或者 create-"),a("pkg",[t._v("创建一个项目。")])],1)],1),t._v(" "),a("p",[t._v("例如：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" create react-app my-react\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等同于执行了")]),t._v("\ncreate-react-app my-app\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" create vite\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 等同于执行了")]),t._v("\ncreate-vite\n")])])]),a("p",[t._v("create命令后面必须加一个package的名字：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/hsyq/assets/imgs/2022-05/202205141922782.png",alt:"image-20220514192237752"}})]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("ERR_PNPM_MISSING_ARGS  Missing the template package name.\nThe correct usage is "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" create "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" with "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" substituted "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" a package name.\n")])])]),a("p",[t._v("pnpm的create命令，不像"),a("code",[t._v("npm create")]),t._v("和"),a("code",[t._v("yarn create")]),t._v("一样，后面还可以跟一些命令参数，比如：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" create vite my-vite-app --tempalte vue\n可以执行\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" create vite my-vue-app --template vue\n就报错了：\n\nPS D:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("demo3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("egg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("three"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" create vite my-vue-adddpp -- --template vue\n ERROR   ERROR  Unknown option: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'template'")]),t._v("\nDid you mean "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test-pattern'")]),t._v("? Use "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--config.unknown=value"')]),t._v(" to force an unknown option.\nFor help, run: "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("help")]),t._v(" create\n")])])]),a("h2",{attrs:{id:"实践-使用pnpm搭建一个monorepo项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实践-使用pnpm搭建一个monorepo项目"}},[t._v("#")]),t._v(" 实践：使用pnpm搭建一个monorepo项目")]),t._v(" "),a("h2",{attrs:{id:"推荐阅读文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推荐阅读文章"}},[t._v("#")]),t._v(" 推荐阅读文章")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/404784010",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pnpm: 最先进的包管理工具"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://juejin.cn/post/6932046455733485575",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于现代包管理器的深度思考——为什么现在我更推荐 pnpm 而不是 npm/yarn?"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/419399115",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么推荐使用pnpm"),a("OutboundLink")],1)])])])])}),[],!1,null,null,null);a.default=s.exports}}]);