(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{334:function(v,_,e){"use strict";e.r(_);var t=e(13),a=Object(t.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h2",{attrs:{id:"安装"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[v._v("#")]),v._v(" 安装")]),v._v(" "),_("h2",{attrs:{id:"登录"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[v._v("#")]),v._v(" 登录")]),v._v(" "),_("p",[v._v("mongo")]),v._v(" "),_("blockquote",[_("p",[v._v("use admin\nswitched to db admin")]),v._v(" "),_("p",[v._v("db.auth('admin', '123456')")]),v._v(" "),_("p",[v._v("1")])]),v._v(" "),_("p",[v._v("文档")]),v._v(" "),_("p",[v._v("http://c.biancheng.net/view/6542.html")]),v._v(" "),_("h1",{attrs:{id:"mongodb索引完全攻略"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#mongodb索引完全攻略"}},[v._v("#")]),v._v(" MongoDB索引完全攻略")]),v._v(" "),_("p",[v._v("http://c.biancheng.net/view/6558.html")]),v._v(" "),_("h2",{attrs:{id:"使用索引时的注意事项"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用索引时的注意事项"}},[v._v("#")]),v._v(" 使用索引时的注意事项")]),v._v(" "),_("p",[v._v("Mongdb在提升查询效率上是很有帮助，但是在实际使用中也不要滥用，否则会适得其反，下面总结几点，供参考：")]),v._v(" "),_("p",[v._v("索引创建时最好作用于取值丰富的字段，有限值的字段就没必要添加索引；")]),v._v(" "),_("p",[v._v("经常排序的字段，可以考虑添加索引；")]),v._v(" "),_("p",[v._v("一个集合中索引的个数不是越多越好，需要根据实际情况来定；")]),v._v(" "),_("p",[v._v("执行接口慢，有可能是缺少索引（查询慢），也有可能是索引使用不当（编辑慢）；")]),v._v(" "),_("p",[v._v("复合索引在使用时，一定要结合索引字段的顺序使用。")]),v._v(" "),_("p",[v._v("索引可以提高查询速度，但是它不是万金油，它也有自己的缺点，就是修改索引字段的写操作（插入、更新和删除），会花费更长的时间。这是因为在更改数据时，除了更新文档，MongoDB还要更新索引。但通常来讲，这个代价是值得的。")]),v._v(" "),_("p",[v._v("为哪些字段建立索引：")]),v._v(" "),_("p",[v._v("经常查询的字段，或者存在性能瓶颈的字段。")]),v._v(" "),_("p",[v._v("从 mongoDB 3.0 开始，ensureIndex 被废弃，今后都仅仅是 createIndex 的一个别名。")]),v._v(" "),_("p",[v._v("索引：一是寻找快，二是不能重复。")]),v._v(" "),_("p",[v._v("文档是没有顺序的，索引是有顺序排列的。")]),v._v(" "),_("p",[v._v("创建索引：")]),v._v(" "),_("p",[v._v('db.book.ensureIndex({"title": 1})')]),v._v(" "),_("p",[v._v("创建二级索引？？？")]),v._v(" "),_("p",[v._v('db.book.ensureIndex({"author.name": 1})')]),v._v(" "),_("p",[v._v("创建唯一性索引：")]),v._v(" "),_("p",[v._v('db.book.ensureIndex({"title": 1}, {unique: true})')]),v._v(" "),_("p",[v._v("查看索引：")]),v._v(" "),_("p",[v._v("db.users.getIndexed()")]),v._v(" "),_("p",[v._v("《MongoDB进阶与实战：微服务整合、性能优化。架构管理》")]),v._v(" "),_("p",[v._v("4.5 唯一性约束")]),v._v(" "),_("p",[v._v("唯一性索引对于文档中缺失")]),v._v(" "),_("h2",{attrs:{id:"v"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#v"}},[v._v("#")]),v._v(" __v")]),v._v(" "),_("p",[v._v('"__v"是"versionKey"的简写，当每一个文档由mongoose创建时就会自动添加，代表这该文档的版本，此属性可配置修改，默认为"__v",')]),v._v(" "),_("p",[v._v('作用是可以在"save文档"时作为一个查询条件，避免在"取出数据"到"save数据"的这段时间内，数据被其他进程修改而导致冲突。')]),v._v(" "),_("blockquote",[_("p",[_("code",[v._v("versionKey")]),v._v("是首次由Mongoose创build时在每个文档上设置的属性。 该键值包含文档的内部修订版本。 此文档属性的名称是可configuration的。 默认是"),_("code",[v._v("__v")]),v._v(" 。")]),v._v(" "),_("p",[v._v("如果这与你的应用程序冲突，你可以这样configuration：")])]),v._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[v._v(" new Schema({..}, { versionKey: '_somethingElse' }) \n")])])])])}),[],!1,null,null,null);_.default=a.exports}}]);